# Tana Desktop Pet

å¯çˆ±çš„å°å²è±å§†å¸¸é©»æ¡Œé¢ï¼Œå¸®ä½ æé†’ä¸“æ³¨ã€æ”¶ç›Šã€å¥åº·çŠ¶æ€ï¼Œè¿˜ä¼šå¶å°”é€æ¥æƒŠå–œã€‚é¡¹ç›®åŸºäº Electron + Vue 3 + Pixi.js æ„å»ºï¼Œå¯ä¸€é”®æ‰“åŒ…æˆè·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **éšæ—¶åœ¨çº¿çš„æ¡Œå® **ï¼šPixi.js æ¸²æŸ“åŠ¨ç”»å²è±å§†ï¼Œçª—å£é€æ˜ã€æ— è¾¹æ¡†ã€å§‹ç»ˆç½®é¡¶ï¼Œä¸å½±å“æ—¥å¸¸å·¥ä½œã€‚
- **æ¨¡å—åŒ–æé†’ç³»ç»Ÿ**ï¼šè¿›åº¦ã€æ”¶ç›Šã€å¥åº·ã€æƒŠå–œå››ç±»æé†’ï¼Œé»˜è®¤ç”± `src/main/appConfig.json` æ¨¡æ¿é©±åŠ¨ï¼Œå¯è‡ªå®šä¹‰æ–‡æ¡ˆä¸è§¦å‘æ¡ä»¶ã€‚
- **æ™ºèƒ½è°ƒåº¦å™¨**ï¼šä¸»è¿›ç¨‹ `ReminderScheduler` ç»Ÿä¸€ç®¡ç†æé†’é˜Ÿåˆ—ï¼Œæ”¯æŒæ—¶é—´é—´éš”ã€éšæœºæ¦‚ç‡ç­‰ç­–ç•¥ã€‚
- **å®‰å…¨çš„ä¸»/æ¸²æŸ“é€šä¿¡**ï¼šé€šè¿‡ `preload.ts` æš´éœ²æœ‰é™ APIï¼Œæ¸²æŸ“å±‚åªæ¥æ”¶æé†’äº‹ä»¶å¹¶æ›´æ–°æ°”æ³¡ UIã€‚
- **å¼€å‘å‹å¥½**ï¼šVite çƒ­æ›´æ–°ã€TypeScript å…¨é¢è¦†ç›–ã€Electron Forge ä¸€é”®æ„å»º/æ‰“åŒ…ã€‚

## ğŸ§± ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ assets/                  # Electron ä¾§é™æ€èµ„æºï¼ˆåº”ç”¨å›¾æ ‡ã€æ‰˜ç›˜å›¾æ ‡ç­‰ï¼‰
â”œâ”€â”€ src/main/
â”‚   â””â”€â”€ appConfig.json       # é»˜è®¤æé†’é…ç½®æ¨¡æ¿ï¼Œé¦–æ¬¡è¿è¡Œä¼šæ‹·è´åˆ°ç”¨æˆ·ç›®å½•
â”œâ”€â”€ forge.config.js          # Electron Forge æ‰“åŒ…é…ç½®
â”œâ”€â”€ package.json             # è„šæœ¬ä¸ä¾èµ–
â”œâ”€â”€ tsconfig.json            # æ¸²æŸ“è¿›ç¨‹ TypeScript é…ç½®
â”œâ”€â”€ tsconfig.main.json       # ä¸»è¿›ç¨‹ TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®ï¼ˆroot -> src/rendererï¼‰
â””â”€â”€ src
    â”œâ”€â”€ shared               # ä¸»/æ¸²æŸ“è¿›ç¨‹å…±äº«ç±»å‹
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â””â”€â”€ reminderTypes.ts
    â”œâ”€â”€ main                 # Electron ä¸»è¿›ç¨‹
    â”‚   â”œâ”€â”€ config.ts        # åŠ è½½ä¸åˆå¹¶æé†’é…ç½®
    â”‚   â”œâ”€â”€ main.ts          # åˆ›å»ºçª—å£ã€ç³»ç»Ÿæ‰˜ç›˜ã€æ³¨å†Œè°ƒåº¦å™¨
    â”‚   â”œâ”€â”€ preload.ts       # å‘æ¸²æŸ“è¿›ç¨‹æš´éœ² electronAPI
    â”‚   â””â”€â”€ reminderScheduler.ts
    â””â”€â”€ renderer             # Vue + Pixi æ¸²æŸ“å±‚
        â”œâ”€â”€ App.vue          # Pixi åŠ¨ç”» + æé†’æ°”æ³¡ UI
        â”œâ”€â”€ assets/          # å‰ç«¯é™æ€èµ„æºï¼ˆslime spritesheet ç­‰ï¼‰
        â”œâ”€â”€ composables/     # ç»„åˆå¼å‡½æ•°ï¼ˆuseReminderBubbles ç­‰ï¼‰
        â”œâ”€â”€ main.ts          # Vue åº”ç”¨å…¥å£
        â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
        â”œâ”€â”€ types/           # æ¸²æŸ“å±‚ä¸šåŠ¡ç±»å‹
        â””â”€â”€ types.d.ts       # å…¨å±€å£°æ˜ï¼ˆwindow.electronAPI ç­‰ï¼‰
```

## âš™ï¸ å¼€å‘ä¸è°ƒè¯•

```bash
# å®‰è£…ä¾èµ–
npm install

# åŒæ—¶å¯åŠ¨ Vite + Electron + tsc --watch
npm run dev

# ä»…æ¸²æŸ“å±‚çƒ­æ›´æ–°
npm run dev:vite

# ä»…ä¸»è¿›ç¨‹å¢é‡ç¼–è¯‘
npm run dev:main

# ç­‰å¾… Vite ready åå¯åŠ¨ Electronï¼ˆé€šå¸¸ç”± npm run dev è°ƒåº¦ï¼‰
npm run dev:electron
```

å¼€å‘æ¨¡å¼ä¸‹å¯ä»¥åœ¨æµè§ˆå™¨ DevTools è°ƒç”¨ `window.pushMockReminder()`ï¼ˆè‡ªåŠ¨æ³¨å…¥ï¼‰ï¼Œæ‰‹åŠ¨è§¦å‘æé†’æ°”æ³¡ä»¥æ£€æŸ¥æ ·å¼ä¸åŠ¨æ•ˆã€‚

## ğŸ› ï¸ æ„å»ºä¸åˆ†å‘

```bash
# æ¸²æŸ“å±‚ + ä¸»è¿›ç¨‹ æ‰“åŒ…åˆ° dist/
npm run build

# åªæ„å»ºæ¸²æŸ“å±‚
npm run build:renderer

# åªæ„å»ºä¸»è¿›ç¨‹
npm run build:main

# Electron Forge å…¥å£
npm run start      # forge start
npm run package    # ç”Ÿæˆå¯å®‰è£…åŒ…
npm run make       # ç”Ÿæˆå¹³å°å‘è¡ŒåŒ…
npm run forge:make # build + forge make ç»„åˆæµç¨‹
```

æ„å»ºè¾“å‡ºï¼š

- `dist/renderer`ï¼šVite äº§ç‰©ã€‚
- `dist/main`ï¼šä¸»è¿›ç¨‹/é¢„åŠ è½½è„šæœ¬ã€‚
- `out/`ï¼šElectron Forge æ‰“åŒ…ç»“æœã€‚

## ğŸ§© é…ç½®è¯´æ˜

`src/main/appConfig.json` å­˜æ”¾æé†’æ¨¡å—çš„é»˜è®¤æ¨¡æ¿ï¼Œåº”ç”¨é¦–æ¬¡å¯åŠ¨ä¼šå°†å…¶æ‹·è´åˆ°ç”¨æˆ·é…ç½®ç›®å½•
`app.getPath('userData')/config/appConfig.json`ï¼ˆLinux é€šå¸¸ä½äº `~/.config/Tana Desktop Pet/config/appConfig.json`ï¼ŒWindows/macOS
ä¼šè½åœ¨å„è‡ªçš„ AppData/Application Support ä¸‹ï¼‰ï¼Œä¹‹åæ‰€æœ‰è¯»å–ä¸å†™å…¥éƒ½å‘ç”Ÿåœ¨è¯¥ç”¨æˆ·çº§æ–‡ä»¶ä¸­ã€‚åˆ é™¤è¯¥æ–‡ä»¶å³å¯åœ¨ä¸‹æ¬¡
å¯åŠ¨æ—¶é‡æ–°å¤åˆ¶æ¨¡æ¿ã€‚é…ç½®é¡¹è¯´æ˜ï¼š

- `baseIntervalMinutes`ï¼šè°ƒåº¦å™¨è½®è¯¢é—´éš”ã€‚
- `reminders.progress` ç­‰æ¨¡å—å¯é…ç½® `triggers`ã€`messages`ã€`cooldownMinutes`ã€‚
- `income` æ¨¡å—é¢å¤–æ”¯æŒ `incomeConfig`ï¼ˆå·¥ä½œæ—¶æ®µã€æ—¶è–ªç­‰ï¼‰ã€‚
- `surprise` æ¨¡å—æ”¯æŒ `randomStrategy`ï¼ˆæœ€å°/æœ€å¤§é—´éš” + æ¦‚ç‡ï¼‰ã€‚

æ›´æ–°é…ç½®åé‡å¯åº”ç”¨å³å¯ç”Ÿæ•ˆï¼›è¯»å–å¤±è´¥æ—¶ä¼šå›é€€è‡³å†…ç½®é»˜è®¤å€¼ã€‚

## ğŸ”’ æ³¨æ„äº‹é¡¹

- å¦‚æœéœ€è¦æ‰©å±•æ›´å¤šè§¦å‘æ¡ä»¶ï¼Œå¯ä»¥åœ¨ä¸»è¿›ç¨‹ä¸­è‡ªå®šä¹‰é€»è¾‘æˆ–ä½¿ç”¨ `custom` è§¦å‘å™¨ã€‚
- ç›®å‰ `incomeConfig.ignoreBreaks` å°šæœªå®ç°ï¼ˆä¸»è¿›ç¨‹ä»£ç å·²æ ‡è®° TODOï¼‰ã€‚
- è‹¥éœ€è¦æ‰©å±•æ¡Œå® äº¤äº’ï¼Œå¯ä»¥åœ¨ `useReminderBubbles` ä¸­æ·»åŠ æ›´å¤šä¸Šä¸‹æ–‡æˆ–åœ¨ä¸»è¿›ç¨‹æ‰©å±•æé†’ç±»å‹ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ [ISC License](./LICENSE)ï¼ˆå¦‚æœªåˆ›å»ºå¯è‡ªè¡Œè¡¥é½ï¼‰ï¼Œæ¬¢è¿åœ¨ä¿ç•™æ¥æºçš„åŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚ç¥ä½ å’Œ Tana ç›¸å¤„æ„‰å¿« ğŸ§¡ã€‚
